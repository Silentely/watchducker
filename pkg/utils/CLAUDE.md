[根目录](../../CLAUDE.md) > [pkg](../) > **utils**

# utils - 工具函数模块

> 更新时间：2025-11-11 14:11:43

## 模块职责

utils 模块提供通用的工具函数和显示输出功能，主要包括：
- 用户界面友好的信息展示
- 容器列表的可视化输出
- 检查结果的汇总展示
- 辅助性的字符串和显示处理

## 入口与启动

本模块不包含初始化逻辑，所有函数都是静态方法，可以直接调用。

### 典型使用方式
```go
// 显示欢迎信息
utils.PrintWelcome()

// 显示容器列表
utils.PrintContainerList(containers)

// 显示检查结果汇总
utils.PrintBatchSummary(result)
```

## 对外接口

### 主要导出函数

#### 显示输出类
- `PrintWelcome()` - 打印程序欢迎信息
- `PrintContainerList(containers []types.ContainerInfo)` - 格式化输出容器列表
- `PrintBatchSummary(result *types.BatchCheckResult)` - 输出批量检查结果汇总

#### 数据处理类（如果存在）
- 字符串格式化函数
- 表格输出辅助函数
- 进度显示功能

## 关键依赖与配置

### 内部模块依赖
- `internal/types`: 容器和检查结果的数据类型
- `fmt`: 标准格式化输出

### 第三方依赖
目前没有外部依赖，仅使用 Go 标准库。

### 输出特性
- 控制台友好的表格格式
- 支持中文字符的正确显示
- 颜色和高亮支持（如果启用）
- 实时进度显示（如果实现）

## 数据模型

### 输入数据类型
- `[]types.ContainerInfo`: 容器信息列表
- `*types.BatchCheckResult`: 批量检查结果

### 显示格式约定
```
// 容器列表格式
ID             名称                  镜像                 状态
----------------------------------------------------------------
abc123         nginx                nginx:latest        running

// 汇总信息格式
总计: 3个容器, 2个镜像, 1个需要更新, 耗时: 1.2s
```

## 测试与质量

> ⚠️ **测试状态**: 无单元测试

### 测试难点
- 控制台输出测试需要捕获标准输出
- 表格格式的视觉测试比较困难
- 中文字符宽度的处理测试

### 测试建议
- 使用 `bytes.Buffer` 捕获输出内容
- 表格对齐和格式的正确性测试
- 边界情况（空列表、长名称等）测试
- 并发输出安全性测试（如果适用）

## 常见问题 (FAQ)

### Q: 如何修改表格的列宽？
A: 需要修改 `PrintContainerList` 函数中的格式化字符串

### Q: 支持彩色输出吗？
A: 当前使用标准输出，可以集成第三方颜色库如 `github.com/fatih/color`

### Q: 可以输出到文件吗？
A: 当前输出到标准输出，可以通过重定向或扩展文件输出功能

### Q: 如何处理超长的容器名称？
A: 当前会截断显示，可以考虑添加自动调整列宽的功能

## 相关文件清单

- `display.go` - 显示输出工具函数

## 变更记录 (Changelog)

### 2025-11-11 14:11:43
- 初始化模块文档
- 记录显示功能和格式约定
- 梳理工具函数的用途
- 识别测试需求